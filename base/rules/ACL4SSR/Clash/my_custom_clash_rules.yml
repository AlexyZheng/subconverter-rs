custom:
  enable_rule_generator: true
  overwrite_original_rules: true





rule-providers:
  telegram_voip_nets:
    type: http
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/fernvenue/telegram-cidr-list/refs/heads/master/CIDR.yaml"
    interval: 86400 # Checks for updates daily
    path: ./ruleset/telegram_voip_nets.yaml
    format: yaml
  LAN:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/AlexyZheng/subconverter-rs/refs/heads/main/base/rules/ACL4SSR/Clash/LAN.yaml"
    interval: 86400 # Checks for updates daily
    path: ./ruleset/LAN.yaml
    format: yaml
  RussianServices:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/AlexyZheng/subconverter-rs/refs/heads/main/base/rules/ACL4SSR/Clash/RussianServices.mrs"
    interval: 86400
    path: ./ruleset/RussianServices.mrs
    format: mrs
  AI:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/AlexyZheng/subconverter-rs/refs/heads/main/base/rules/ACL4SSR/Clash/AI.mrs"
    interval: 86400
    path: ./ruleset/AI.mrs
    format: mrs
  Github:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/AlexyZheng/subconverter-rs/refs/heads/main/base/rules/ACL4SSR/Clash/Github.mrs"
    interval: 86400
    path: ./ruleset/Github.mrs
    format: mrs
  RussiaChinaWhitelist:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/AlexyZheng/subconverter-rs/refs/heads/main/base/rules/ACL4SSR/Clash/RussianChinaWhitelist.yaml"
    interval: 86400 # Checks for updates daily
    path: ./ruleset/RussianChinaWhitelist.yaml
    format: yaml
  GoogleCNIP:
    type: http
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/AlexyZheng/subconverter-rs/refs/heads/main/base/rules/ACL4SSR/Clash/GoogleCNIP.yaml"
    interval: 86400 # Checks for updates daily
    path: ./ruleset/GoogleCNIP.yaml
    format: yaml
  GoogleCN:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/AlexyZheng/subconverter-rs/refs/heads/main/base/rules/ACL4SSR/Clash/GoogleCN.mrs"
    interval: 86400 # Checks for updates daily
    path: ./ruleset/GoogleCN.mrs
    format: mrs

append-rules:
  - RULE-SET,LAN,üñß LAN,
  - RULE-SET,Github,Github
  - RULE-SET,AI,‚ú¶Ô∏é AI
  - RULE-SET,telegram_voip_nets,Telegram,no-resolve,network,tcp,DST-PORT,80/443/5222
  - RULE-SET,telegram_voip_nets,Telegram,no-resolve,network,udp,DST-PORT,596/597/598/599/1400/4000-5000
  - RULE-SET,RussiaChinaWhitelist,‰∏≠‰øÑÁΩëÈ≠öÂñÆ –ö–ù–†-–†–§ –ü–æ–π–º–∞–Ω–Ω–æ–π —Ä—ã–±—ã
  - RULE-SET,RussianServices,‰øÑÁæÖÊñØÂúãÂÖß –†–§ –í –ø—Ä–µ–¥–µ–ª–∞—Ö
  - GEOIP,RU,‰øÑÁæÖÊñØÂúãÂÖß –†–§ –í –ø—Ä–µ–¥–µ–ª–∞—Ö
  - GEOIP,CN,‰∏≠ÂúãÂúãÂÖß –ö–ù–† –í –ø—Ä–µ–¥–µ–ª–∞—Ö
  - GEOSITE,CN,‰∏≠ÂúãÂúãÂÖß –ö–ù–† –í –ø—Ä–µ–¥–µ–ª–∞—Ö
  - RULE-SET,GoogleCNIP,ÊºèÁΩë‰πãÈ≠ö –ù–µ–ø–æ–π–º–∞–Ω–Ω–∞—è —Ä—ã–±–∞
  - RULE-SET,GoogleCN,ÊºèÁΩë‰πãÈ≠ö –ù–µ–ø–æ–π–º–∞–Ω–Ω–∞—è —Ä—ã–±–∞
  - MATCH,ÊºèÁΩë‰πãÈ≠ö –ù–µ–ø–æ–π–º–∞–Ω–Ω–∞—è —Ä—ã–±–∞


# --- 1. Rule Provider Definition (Fetches Dynamic IPs) ---
rule-providers:
  telegram_voip_nets:
    type: http
    # This behavior is critical for processing the CIDR list correctly
    behavior: ipcidr
    url: "https://raw.githubusercontent.com/fernvenue/telegram-cidr-list/refs/heads/master/CIDR.yaml"
    interval: 86400 # Checks for updates daily
    path: ./ruleset/telegram_voip_nets.yaml

# --- 2. Rules Section (Applies Selective Filtering) ---
rules:
  # TCP Signaling Traffic: Targets the dynamic IP list on call setup ports (80, 443, 5222)
  - RULE-SET,telegram_voip_nets,Telegram,no-resolve,network,tcp,DST-PORT,80/443/5222

  # UDP Media Traffic: Targets the dynamic IP list on real-time media ports (596-599, 1400, 4000-5000)
  - RULE-SET,telegram_voip_nets,Telegram,no-resolve,network,udp,DST-PORT,596/597/598/599/1400/4000-5000

  # Placeholder for other general rules that subconverter will append later.
  # (e.g., GEOIP, FINAL MATCH, etc.)
  # If you are using a base template, ensure standard rules are included here or added by subconverter.
